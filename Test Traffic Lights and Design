from Tkinter import *
import time
import Tkinter as tk
root = tk.Tk()

# Use urllib to access a public url and import it through base64 as a .gif image usable in Tkinter (the file has to be formatted as a .gif to begin with)

import urllib
URL = "https://djaspermorris.files.wordpress.com/2015/01/rsz_deal_with_it_mk2.gif"
u = urllib.urlopen(URL)
raw_data = u.read()
u.close()

import base64
b64_data = base64.encodestring(raw_data)
gif1 = tk.PhotoImage(data=b64_data)

# Create the canvas

canvas = Canvas(width = 500, height = 400, bg = 'white')

# Pack the canvas into a frame/form

canvas.pack(expand = YES, fill = BOTH)

# Put gif image on canvas
# The gif image's upper left corner on the canvas is at x=0 y=0

canvas.create_image(0, 0, image = gif1, anchor = NW)

# Run the code

class robot:
    def __init__(self,x,y, x1, y1, speed=1.0, size=4, colour='red'):
        
        self.vx = 5.0
        self.vy = 2.5
        self.x = x
        self.y = y
        self.speed = speed
        self.size = size
        self.x1 = self.x + self.size
        self.y1 = self.y + self.size

        self.colour = colour
  

    def roam (self):
        self.collison()
        #Implements traffic function
        self.traffic()

        self.x += self.vx
        self.y += self.vy
        self.x1 = self.x + self.size
        self.y1 = self.y + self.size


        self.canvas.coords(self.shape, self.x, self.y, self.x + self.size, self.y + self.size)
        self.canvas.update()

    def boundries(self, vx, vy, x_min, y_min, x_max, y_max):

        self.vx = vx
        self.vy = vy

        
        self.x_min = x_min
        self.y_min = y_min
        self.x_max = x_max 
        self.y_max = y_max

             
    def drawrobot(self, canvas):
        self.canvas = canvas
        self.shape = canvas.create_rectangle(self.x, self.y, self.x + self.size, self.y + self.size, fill=self.colour)
        

    def collison(self):
        if self.x1 >= self.x_max:
            self.vx = -10.0
            
        if self.y <= self.y_min:
            self.vy = 5.0
            
        if self.y1 >= self.y_max:
            self.vy = -5.0
            
        if self.x <= self.x_min:
            self.vx = 10.0
 #traffic light function 
    def traffic(self):
        self.i = i
        
          
        if self.i==250 or self.i==500 or self.i==750:
            self.OR = canvas.create_oval(x+20,y+20,x+50,y1-20, fill='red')
            self.canvas.update()
            self.vx=0
            self.vy=0
        if self.i==270 or self.i==520 or self.i==770:
            self.canvas.delete(self.OR)
            self.OA = canvas.create_oval(x+20,y+20,x+50,y1-20, fill='yellow')
            self.canvas.update()
            self.vx=0
            self.vy=0
        if self.i==280 or self.i==530 or self.i==780:
            self.canvas.delete(self.OA)
            self.OG = canvas.create_oval(x+20,y+20,x+50,y1-20, fill='green')
            self.canvas.update()
            self.vx=5
            self.vy=-5
        if self.i==282 or self.i==532 or self.i==782:
            self.canvas.delete(self.OG)
i = 0

r2d2 = robot(150, 150,0,0, speed = 1, size= 30, colour = 'red')
r2d2.drawrobot(canvas)

x_min = 0.0
y_min = 0.0
x_max = 500.0
y_max = 400.0

vx = 10.0
